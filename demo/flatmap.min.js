/*! flatmap 28-01-2019 */

var url,gpx,file_name_ext,uploaded_file,avgtemp,avgcad,plotcords,elecords,hrcords,tempcords,cadcords,timecords,hrdata,eledata,tempdata,caddata,ele_min,ele_max,marker_list,markers_layer,markersLayerG,invis_marker_iter,marker_iter,eleHotlineLayer,hrHotlineLayer,cadHotlineLayer,tempHotlineLayer,eleHotlineLayerG,hrHotlineLayerG,cadHotlineLayerG,tempHotlineLayerG,eleHotlineMarkers,hrHotlineMarkers,cadHotlineMarkers,tempHotlineMarkers,eleicon,hricon,cadicon,tempicon,chart_left,chart_right;!function(e,t){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports?module.exports=t:t(e.L)}(this,function(c){if(c.Hotline)return c;var t=function(e){if(!(this instanceof t))return new t(e);this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._weight=5,this._outlineWidth=1,this._outlineColor="black",this._min=0,this._max=1,this._data=[],this.palette({0:"green",.5:"yellow",1:"red"})};t.prototype={width:function(e){return this._width=e,this},height:function(e){return this._height=e,this},weight:function(e){return this._weight=e,this},outlineWidth:function(e){return this._outlineWidth=e,this},outlineColor:function(e){return this._outlineColor=e,this},palette:function(e){var t=document.createElement("canvas"),a=t.getContext("2d"),o=a.createLinearGradient(0,0,0,256);for(var n in t.width=1,t.height=256,e)o.addColorStop(n,e[n]);return a.fillStyle=o,a.fillRect(0,0,1,256),this._palette=a.getImageData(0,0,1,256).data,this},min:function(e){return this._min=e,this},max:function(e){return this._max=e,this},data:function(e){return this._data=e,this},add:function(e){return this._data.push(e),this},draw:function(){var e=this._ctx;return e.globalCompositeOperation="source-over",e.lineCap="round",this._drawOutline(e),this._drawHotline(e),this},getRGBForValue:function(e){var t=Math.min(Math.max((e-this._min)/(this._max-this._min),0),.999),a=4*Math.floor(256*t);return[this._palette[a],this._palette[a+1],this._palette[a+2]]},_drawOutline:function(e){var t,a,o,n,r,i,l;if(this._outlineWidth)for(t=0,o=this._data.length;t<o;t++)for(n=this._data[t],e.lineWidth=this._weight+2*this._outlineWidth,a=1,r=n.length;a<r;a++)i=n[a-1],l=n[a],e.strokeStyle=this._outlineColor,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(l.x,l.y),e.stroke()},_drawHotline:function(e){var t,a,o,n,r,i,l,d,s,c;for(e.lineWidth=this._weight,t=0,o=this._data.length;t<o;t++)for(a=1,r=(n=this._data[t]).length;a<r;a++)i=n[a-1],l=n[a],d=e.createLinearGradient(i.x,i.y,l.x,l.y),s=this.getRGBForValue(i.z),c=this.getRGBForValue(l.z),d.addColorStop(0,"rgb("+s.join(",")+")"),d.addColorStop(1,"rgb("+c.join(",")+")"),e.strokeStyle=d,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(l.x,l.y),e.stroke()}};var a=c.Canvas.extend({_initContainer:function(){c.Canvas.prototype._initContainer.call(this),this._hotline=new t(this._container)},_update:function(){c.Canvas.prototype._update.call(this),this._hotline.width(this._container.width),this._hotline.height(this._container.height)},_updatePoly:function(e){if(this._drawing){var t=e._parts;t.length&&(this._updateOptions(e),this._hotline.data(t).draw())}},_updateOptions:function(e){null!=e.options.min&&this._hotline.min(e.options.min),null!=e.options.max&&this._hotline.max(e.options.max),null!=e.options.weight&&this._hotline.weight(e.options.weight),null!=e.options.outlineWidth&&this._hotline.outlineWidth(e.options.outlineWidth),null!=e.options.outlineColor&&this._hotline.outlineColor(e.options.outlineColor),e.options.palette&&this._hotline.palette(e.options.palette)}}),e=function(e){return c.Browser.canvas?new a(e):null},s={clipSegment:function(e,t,a,o,n){var r,i,l,d=o?this._lastCode:c.LineUtil._getBitCode(e,a),s=c.LineUtil._getBitCode(t,a);for(this._lastCode=s;;){if(!(d|s))return[e,t];if(d&s)return!1;r=d||s,i=c.LineUtil._getEdgeIntersection(e,t,r,a,n),l=c.LineUtil._getBitCode(i,a),r===d?(i.z=e.z,e=i,d=l):(i.z=t.z,t=i,s=l)}}};return c.Hotline=c.Polyline.extend({statics:{Renderer:a,renderer:e},options:{renderer:e(),min:0,max:1,palette:{0:"green",.5:"yellow",1:"red"},weight:5,outlineColor:"black",outlineWidth:1},getRGBForValue:function(e){return this._renderer._hotline.getRGBForValue(e)},_projectLatlngs:function(e,t,a){var o,n,r=e[0]instanceof c.LatLng,i=e.length;if(r){for(n=[],o=0;o<i;o++)n[o]=this._map.latLngToLayerPoint(e[o]),n[o].z=e[o].alt,a.extend(n[o]);t.push(n)}else for(o=0;o<i;o++)this._projectLatlngs(e[o],t,a)},_clipPoints:function(){if(this.options.noClip)this._parts=this._rings;else{this._parts=[];var e,t,a,o,n,r,i,l=this._parts,d=this._renderer._bounds;for(a=e=0,o=this._rings.length;e<o;e++)for(t=0,n=(i=this._rings[e]).length;t<n-1;t++)(r=s.clipSegment(i[t],i[t+1],d,t,!0))&&(l[a]=l[a]||[],l[a].push(r[0]),r[1]===i[t+1]&&t!==n-2||(l[a].push(r[1]),a++))}},_clickTolerance:function(){return this.options.weight/2+this.options.outlineWidth+(c.Browser.touch?10:0)}}),c.hotline=function(e,t){return new c.Hotline(e,t)},c});var mymap=L.map("mapid").setView([51.505,-.09],13);L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiamF3YWRzaGFoaWQiLCJhIjoiY2puZzQ0eno3MDRjbDNrcWlsZjZxNTcxaSJ9.mavbvckNOMnntmxWcKboyQ",{maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.outdoors"}).addTo(mymap);var control=L.control.layers(null,null).addTo(mymap);function display_gpx(t){if(t){url="GPXFiles/"+document.getElementById("gpx_file").files[0].name;new L.GPX(url,{async:!0,polyline_options:{color:"MidnightBlue"},marker_options:{startIconUrl:"http://github.com/mpetazzoni/leaflet-gpx/raw/master/pin-icon-start.png",endIconUrl:"http://github.com/mpetazzoni/leaflet-gpx/raw/master/pin-icon-end.png"}}).on("loaded",function(e){gpx=e.target,mymap.fitBounds(gpx.getBounds()),control.addBaseLayer(gpx,"Simple line"),a("distance").textContent=(gpx.get_distance()/1e3).toFixed(2),a("duration").textContent=gpx.get_duration_string(gpx.get_moving_time()),a("speed").textContent=gpx.get_moving_speed().toFixed(2),a("avghr").textContent=gpx.get_average_hr(),a("avgcad").textContent=gpx.get_average_cadence(),avgtemp=gpx.get_average_temp(),a("elevation-net").textContent=(gpx.get_elevation_gain()-gpx.get_elevation_loss().toFixed(0)).toFixed(2),hrdata=getCol(gpx.get_heartrate_data(),1),eledata=getCol(gpx.get_elevation_data(),1),tempdata=getCol(gpx.get_temp_data(),1),caddata=getCol(gpx.get_cadence_data(),1),ele_min=gpx.get_elevation_min(),ele_max=gpx.get_elevation_max(),loadXMLDoc(),window.setTimeout(function(){draw_hotline_all(),chart_left&&chart_left.destroy(),chart_right&&chart_right.destroy(),chart_left=display_chart(timecords,eledata,"Elevation","myChart1","teal","card-to-left"),chart_right=display_chart(timecords,hrdata,"Heart Rate","myChart2","purple","card-to-right")},300)}).addTo(mymap);$("#file_success_alert").show(),document.getElementById("myChart1").style.display="none",document.getElementById("myChart2").style.display="none"}function a(e){return t.getElementsByClassName(e)[0]}}function draw_hotline_all(){all_marker_groups(),remove_layer(hrHotlineLayer),remove_layer(eleHotlineLayer),remove_layer(tempHotlineLayer),remove_layer(cadHotlineLayer),0!=hrcords.length?(draw_hotline_hr(),$("#hr_layer_button").show()):$("#hr_layer_button").hide(),0!=elecords.length?(draw_hotline_ele(),$("#ele_layer_button").show()):$("#ele_layer_button").hide(),0!=tempcords.length?(draw_hotline_temp(),$("#temp_layer_button").show(),document.getElementById("cad_header").innerText="Average Temperature",console.log("temp:",gpx.get_average_temp()),document.getElementById("avg_cad").innerText=avgtemp,document.getElementById("cad_unit").innerText="°C",document.getElementById("cad_img").src="https://image.flaticon.com/icons/svg/134/134125.svg"):(document.getElementById("cad_header").innerText="Average Cadence",document.getElementById("cad_unit").innerText="cad",document.getElementById("cad_img").src="https://image.flaticon.com/icons/svg/670/670750.svg",$("#temp_layer_button").hide()),0!=cadcords.length?(draw_hotline_cad(),$("#cad_layer_button").show()):$("#cad_layer_button").hide()}function draw_hotline_ele(){eleHotlineLayer=L.hotline(elecords,{min:ele_min,max:ele_max,palette:{0:"#41ead4",.5:"#fbff12",1:"#ff206e"},weight:7,outlineColor:"#000000",outlineWidth:1}),eleHotlineLayerG.push(eleHotlineLayer),eleHotlineLayerG=L.layerGroup(eleHotlineLayerG),control.addBaseLayer(eleHotlineLayerG,"Elevation Line").addTo(mymap)}function draw_hotline_hr(){hrHotlineLayer=L.hotline(hrcords,{min:90,max:200,palette:{0:"#41ead4",.5:"#fbff12",1:"#ff206e"},weight:7,outlineColor:"#000000",outlineWidth:1}),hrHotlineLayerG.push(hrHotlineLayer),hrHotlineLayerG=L.layerGroup(hrHotlineLayerG),control.addBaseLayer(hrHotlineLayerG,"Heart Rate Line").addTo(mymap)}function draw_hotline_temp(){tempHotlineLayer=L.hotline(tempcords,{min:20,max:40,palette:{0:"#41ead4",.5:"#fbff12",1:"#ff206e"},weight:7,outlineColor:"#000000",outlineWidth:1}),tempHotlineLayerG.push(tempHotlineLayer),tempHotlineLayerG=L.layerGroup(tempHotlineLayerG),control.addBaseLayer(tempHotlineLayerG,"Temperature Line").addTo(mymap)}function draw_hotline_cad(){cadHotlineLayer=L.hotline(cadcords,{min:0,max:150,palette:{0:"#41ead4",.5:"#fbff12",1:"#ff206e"},weight:7,outlineColor:"#000000",outlineWidth:1}),cadHotlineLayerG.push(cadHotlineLayer),cadHotlineLayerG=L.layerGroup(cadHotlineLayerG),control.addBaseLayer(cadHotlineLayerG,"Cadence Line").addTo(mymap)}function loadXMLDoc(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&myFunction(this)},e.open("GET",url,!0),e.send()}function myFunction(e){var t;for(t=e.responseXML,plotcords=[],elecords=[],hrcords=[],tempcords=[],cadcords=[],timecords=[],plotpoints=t.getElementsByTagName("trkpt"),timepoins=t.getElementsByTagName("time"),t.getElementsByTagName("bla").length&&console.log("bad"),i=0;i<plotpoints.length;i++)plotcords.push([Number(plotpoints[i].getAttribute("lat")),Number(plotpoints[i].getAttribute("lon"))]),elecords.push([Number(plotpoints[i].getAttribute("lat")),Number(plotpoints[i].getAttribute("lon")),eledata[i]]),hrcords.push([Number(plotpoints[i].getAttribute("lat")),Number(plotpoints[i].getAttribute("lon")),hrdata[i]]),null!=tempdata[i]&&tempcords.push([Number(plotpoints[i].getAttribute("lat")),Number(plotpoints[i].getAttribute("lon")),tempdata[i]]),null!=caddata[i]&&cadcords.push([Number(plotpoints[i].getAttribute("lat")),Number(plotpoints[i].getAttribute("lon")),caddata[i]]),timecords.push(timepoins[i].childNodes[0].nodeValue.substring(11,19));console.log(plotcords),console.log(timecords),console.log(elecords),console.log(hrcords),console.log(tempcords),console.log(cadcords)}function printcords(e){console.log("#2"),console.log(e)}function getCol(e,t){for(var a=[],o=0;o<e.length;o++)a.push(e[o][t]);return a}function getColor(e){return e<50?"#bd0026":e<100?"#f03b20":e<200?"#fd8d3c":e<300?"#fecc5c":"#ffffb2"}function draw_markers(){for(remove_layer(markers_layer),markers_layer=L.layerGroup([]),b=0;b<plotcords.length;b+=10){var e=L.marker(plotcords[b],{riseOnHover:"true",icon:L.icon({iconUrl:"Icons/blank2.png",iconSize:[5,5],iconAnchor:[2.5,5]})}).addTo(mymap);e.bindTooltip("<b>Elevation: </b>"+eledata[b].toFixed(2)+"<br /><b>Heart Rate: </b>"+hrdata[b].toFixed(2)+"<br /><b>Temperature: </b>"+tempdata[b]+"<br /><b>Cadence: </b>"+caddata[b]+"<br />"),markers_layer.addLayer(e)}control.addOverlay(markers_layer,"Markers").addTo(mymap)}function remove_layer(e){null!=e&&(mymap.removeLayer(e),control.removeLayer(e))}function display_chart(e,t,a,o,n,r){for(console.log(t),console.log(e),i=0;i<t.length;i++)t[i]=t[i].toFixed(2);document.getElementById(o).style.display="block",document.getElementById(o).innerHTML="",document.getElementById(r).style.marginTop="4%";var l=document.getElementById(o).getContext("2d");return new Chart(l,{type:"line",data:{labels:e,datasets:[{label:a,data:t,fill:!1,borderColor:n,borderWidth:2,backgroundColor:n,pointHitRadius:5}]},options:{tooltips:{displayColors:!1},elements:{point:{radius:0}},responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}function all_marker_groups(){for(0!=elecords.length&&(eleHotlineLayerG=[]),0!=hrcords.length&&(hrHotlineLayerG=[]),0!=cadcords.length&&(cadHotlineLayerG=[]),0!=tempcords.length&&(tempHotlineLayerG=[]),markersLayerG=[],marker_iter=invis_marker_iter=0,invis_marker_iter=plotcords.length<1e3?(marker_iter=25,2):plotcords.length<5e3?(marker_iter=75,5):(marker_iter=250,10),j=0;j<plotcords.length;j+=invis_marker_iter){var e=L.marker(plotcords[j],{riseOnHover:"true",icon:L.icon({iconUrl:"Icons/blank2.png",iconSize:[5,5],iconAnchor:[2.5,5]})});if(0!=tempdata.length&&0!=caddata.length&&e.bindTooltip("<b>Elevation: </b>"+eledata[j].toFixed(2)+"<br /><b>Heart Rate: </b>"+hrdata[j].toFixed(2)+"<br /><b>Temperature: </b>"+tempdata[j]+"<br /><b>Cadence: </b>"+caddata[j]+"<br />"),0==tempdata.length&&0!=caddata.length&&e.bindTooltip("<b>Elevation: </b>"+eledata[j].toFixed(2)+"<br /><b>Heart Rate: </b>"+hrdata[j].toFixed(2)+"<br /><b>Cadence: </b>"+caddata[j]+"<br />"),0!=tempdata.length&&0==caddata.length&&e.bindTooltip("<b>Elevation: </b>"+eledata[j].toFixed(2)+"<br /><b>Heart Rate: </b>"+hrdata[j].toFixed(2)+"<br /><b>Temperature: </b>"+tempdata[j]+"<br />"),markersLayerG.push(e),j%marker_iter==0){if(0!=elecords.length){eleicon=eledata[j]<50?"Icons/hill1.png":eledata[j]<100?"Icons/hill2.png":"Icons/hill3.png";var t=L.marker(plotcords[j],{riseOnHover:"true",icon:L.icon({iconUrl:eleicon,iconSize:[20,16.5],iconAnchor:[10,16.5]})});t.bindPopup("<b>Elevation: </b>"+eledata[j].toFixed(2)),eleHotlineLayerG.push(t)}if(0!=hrcords.length){hricon=hrdata[j]<100?"Icons/heart1.png":hrdata[j]<150?"Icons/heart2.png":"Icons/heart3.png";var a=L.marker(plotcords[j],{riseOnHover:"true",icon:L.icon({iconUrl:hricon,iconSize:[20,19],iconAnchor:[10,19]})});a.bindPopup("<b>Heart Rate: </b>"+hrdata[j].toFixed(2)),hrHotlineLayerG.push(a)}if(0!=cadcords.length){cadicon=caddata[j]<50?"Icons/cad1.png":caddata[j]<100?"Icons/cad2.png":"Icons/cad3.png";var o=L.marker(plotcords[j],{riseOnHover:"true",icon:L.icon({iconUrl:cadicon,iconSize:[19,18],iconAnchor:[9.5,18]})});o.bindPopup("<b>Cadence: </b>"+caddata[j].toFixed(2)),cadHotlineLayerG.push(o)}if(0!=tempcords.length){tempicon=tempdata[j]<20?"Icons/temp1.png":tempdata[j]<35?"Icons/temp2.png":"Icons/temp3.png";var n=L.marker(plotcords[j],{riseOnHover:"true",icon:L.icon({iconUrl:tempicon,iconSize:[10,20],iconAnchor:[5,20]})});n.bindPopup("<b>Temperature: </b>"+tempdata[j]),tempHotlineLayerG.push(n)}}}markersLayerG=L.layerGroup(markersLayerG),control.addOverlay(markersLayerG,"Markers").addTo(mymap)}$(document).ready(function(){$("#right_column").hide(),$("#left_column").hide(),$("#middle_column").hide(),$("#get_file").tooltip("show")}),$("#get_file").click(function(){$("#get_file").tooltip("hide")}),$("#hr_layer_button").click(function(){$("#hr_layer_button").tooltip("hide")}),$("#ele_layer_button").click(function(){$("#ele_layer_button").tooltip("hide")}),$("#temp_layer_button").click(function(){$("#temp_layer_button").tooltip("hide")}),$("#cad_layer_button").click(function(){$("#cad_layer_button").tooltip("hide")}),$("#hr_layer_button").hover(function(){$("#hr_layer_button").tooltip("show")}),$("#ele_layer_button").hover(function(){$("#ele_layer_button").tooltip("show")}),$("#temp_layer_button").hover(function(){$("#temp_layer_button").tooltip("show")}),$("#cad_layer_button").hover(function(){$("#cad_layer_button").tooltip("show")}),$(".leaflet-control-layers-toggle").hover(function(){$(".leaflet-control-layers-toggle").tooltip("hide")}),$(".leaflet-control-layers-toggle").hide(),document.getElementById("get_file").onclick=function(){document.getElementById("gpx_file").click()},document.getElementById("chart_file").onclick=function(){display_chart(timecords,eledata,"Elevation","myChart1","teal"),display_chart(timecords,hrdata,"Heart Rate","myChart2","red")},$(document).ready(function(){$("#gpx_file").on("change",function(){$("#right_column").show(),$("#left_column").show(),$("#middle_column").show(),uploaded_file=document.getElementById("gpx_file").value,"gpx"===(file_name_ext=uploaded_file.split(".").pop().toLowerCase())?(console.log(file_name_ext),remove_layer(gpx),remove_layer(markersLayerG),remove_layer(hrHotlineLayerG),remove_layer(eleHotlineLayerG),remove_layer(tempHotlineLayerG),remove_layer(cadHotlineLayerG),display_gpx(document.getElementById("demo")),$("#hr_layer_button").attr("class","btn btn-outline-danger"),$("#ele_layer_button").attr("class","btn btn-outline-warning"),$("#temp_layer_button").attr("class","btn btn-outline-info"),$("#cad_layer_button").attr("class","btn btn-outline-success")):alert("Incorrect file type, please upload a .gpx file")})}),$("#hr_layer_button").hide(),$("#ele_layer_button").hide(),$("#cad_layer_button").hide(),$("#temp_layer_button").hide(),$("#hr_layer_button").click(function(){mymap.fitBounds(gpx.getBounds()),mymap.hasLayer(hrHotlineLayerG)?($("#hr_layer_button").attr("class","btn btn-outline-danger"),mymap.removeLayer(hrHotlineLayerG),mymap.addLayer(gpx),mymap.addLayer(markersLayerG)):(mymap.addLayer(hrHotlineLayerG),mymap.addLayer(markersLayerG),mymap.hasLayer(gpx)&&mymap.removeLayer(gpx),mymap.hasLayer(eleHotlineLayerG)&&mymap.removeLayer(eleHotlineLayerG),mymap.hasLayer(cadHotlineLayerG)&&mymap.removeLayer(cadHotlineLayerG),mymap.hasLayer(tempHotlineLayerG)&&mymap.removeLayer(tempHotlineLayerG),$("#hr_layer_button").attr("class","btn btn-danger"),$("#ele_layer_button").attr("class","btn btn-outline-warning"),$("#temp_layer_button").attr("class","btn btn-outline-info"),$("#cad_layer_button").attr("class","btn btn-outline-success"))}),$("#ele_layer_button").click(function(){mymap.fitBounds(gpx.getBounds()),mymap.hasLayer(eleHotlineLayerG)?($("#ele_layer_button").attr("class","btn btn-outline-warning"),mymap.removeLayer(eleHotlineLayerG),mymap.addLayer(gpx),mymap.addLayer(markersLayerG)):(mymap.addLayer(eleHotlineLayerG),mymap.addLayer(markersLayerG),mymap.hasLayer(gpx)&&mymap.removeLayer(gpx),mymap.hasLayer(hrHotlineLayerG)&&mymap.removeLayer(hrHotlineLayerG),mymap.hasLayer(cadHotlineLayerG)&&mymap.removeLayer(cadHotlineLayerG),mymap.hasLayer(tempHotlineLayerG)&&mymap.removeLayer(tempHotlineLayerG),$("#hr_layer_button").attr("class","btn btn-outline-danger"),$("#ele_layer_button").attr("class","btn btn-warning"),$("#temp_layer_button").attr("class","btn btn-outline-info"),$("#cad_layer_button").attr("class","btn btn-outline-success"))}),$("#cad_layer_button").click(function(){mymap.fitBounds(gpx.getBounds()),mymap.hasLayer(cadHotlineLayerG)?($("#cad_layer_button").attr("class","btn btn-outline-success"),mymap.removeLayer(cadHotlineLayerG),mymap.addLayer(gpx),mymap.addLayer(markersLayerG)):(mymap.addLayer(cadHotlineLayerG),mymap.addLayer(markersLayerG),mymap.hasLayer(gpx)&&mymap.removeLayer(gpx),mymap.hasLayer(eleHotlineLayerG)&&mymap.removeLayer(eleHotlineLayerG),mymap.hasLayer(hrHotlineLayerG)&&mymap.removeLayer(hrHotlineLayerG),mymap.hasLayer(tempHotlineLayerG)&&mymap.removeLayer(tempHotlineLayerG),$("#hr_layer_button").attr("class","btn btn-outline-danger"),$("#ele_layer_button").attr("class","btn btn-outline-warning"),$("#temp_layer_button").attr("class","btn btn-outline-info"),$("#cad_layer_button").attr("class","btn btn-success"))}),$("#temp_layer_button").click(function(){mymap.fitBounds(gpx.getBounds()),mymap.hasLayer(tempHotlineLayerG)?($("#temp_layer_button").attr("class","btn btn-outline-info"),mymap.removeLayer(tempHotlineLayerG),mymap.addLayer(gpx),mymap.addLayer(markersLayerG)):(mymap.addLayer(tempHotlineLayerG),mymap.addLayer(markersLayerG),mymap.hasLayer(gpx)&&mymap.removeLayer(gpx),mymap.hasLayer(eleHotlineLayerG)&&mymap.removeLayer(eleHotlineLayerG),mymap.hasLayer(cadHotlineLayerG)&&mymap.removeLayer(cadHotlineLayerG),mymap.hasLayer(hrHotlineLayerG)&&mymap.removeLayer(hrHotlineLayerG),$("#hr_layer_button").attr("class","btn btn-outline-danger"),$("#ele_layer_button").attr("class","btn btn-outline-warning"),$("#temp_layer_button").attr("class","btn btn-info"),$("#cad_layer_button").attr("class","btn btn-outline-success"))});